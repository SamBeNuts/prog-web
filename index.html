<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Emna">
    <meta name="author" content="Ha">
    <meta name="author" content="Jin Yu">
    <meta name="author" content="Samuel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSA - Prog Web</title>
    <link rel="icon" href="img/favicon-96x96.png" type="image/png" sizes="96x96">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/homepage.css">
</head>
<body>
<div id="wrapper">
    <header>
        <img src="img/header_bg_homepage.jpg" class="bg">
        <img src="img/student_header_homepage.png" class="student_bg not_phone">
        <p class="text_bg text_white text_shadow">Planning to <br><span class="text_red front">study</span> <span>abroad</span></p>
        <a href="index.html"><img src="img/logo_insa_w.png" class="logo_insa"></a>
        <nav role="navigation">
            <div class="menuToggle" onclick="menuToggle(this)">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <ul class="menuItems">
                <li><a href="offre.html" class="text_white">Écoles partenaires</a></li>
                <li><a href="procedure.html" class="text_white">Procédure</a></li>
                <li><a href="simu.html" class="text_white">Simulation budget</a></li>
                <li><a href="FAQ.html" class="text_white">FAQ</a></li>
                <!--<li>FR/EN</li>-->
            </ul>
        </nav>
    </header>
    <div class="content chiffres">
        <div>
            <img src="img/chiffres_1.png">
            <p><span>300</span><br>étudiants/an</p>
        </div>
        <div>
            <img src="img/chiffres_2.png">
            <p><span>200+</span><br>écoles partenaires</p>
        </div>
        <div>
            <img src="img/chiffres_3.png">
            <p><span>40+</span><br>pays visités</p>
        </div>
    </div>
    <div class="content avantages">
        <div class="left not_phone">
            <img src="img/avantages_1.png">
            <p class="avantages_txt_num text_red">2</p>
            <p class="avantages_txt_title">Gagner en autonomie et en capacité d'adaptation !</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            <img src="img/avantages_2.png">
        </div>
        <div class="right">
            <p class="title">Pourquoi partir à l'étranger ?</p>
            <p class="avantages_txt_num text_red">1</p>
            <p class="avantages_txt_title"> Découvrir un nouveau pays, de nouvelles cultures, ...</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            <div class="not_pc not_tablet">
                <p class="avantages_txt_num text_red">2</p>
                <p class="avantages_txt_title">Gagner en autonomie et en capacité d'adaptation !</p>
                <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            </div>
            <img src="img/avantages_3.png">
            <p class="avantages_txt_num text_red">3</p>
            <p class="avantages_txt_title">Se préparer à une carrière internationale</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
        </div>
    </div>
    <div class="content partner_schools_title">
        <p class="title">Nouvelles écoles partenaires</p>
    </div>
    <div class="slider">
        <div class="slides"></div>
        <img src="img/next_btn.png" class="navigation previous" onclick="changeSlide(-3)">
        <div class="pagination"></div>
        <img src="img/next_btn.png" class="navigation next" onclick="changeSlide(-1)">
        <a href="offre.html">
            <div class="see_more">
                <p class="text_white text_shadow"><img src="img/more_btn.png"> Voir toutes les offres</p>
            </div>
        </a>
    </div>
    <div class="content procedure">
        <p class="title">Procédure</p>
        <div class="road">
            <div class="road_arc"></div>
            <div class="step">
                <p class="num text_red">01.</p>
                <a href="procedure.html#01">
                    <div><img src="img/procedure_1.png"></div>
                </a>
                <p class="content">Définir<br>son projet</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">02.</p>
                <a href="procedure.html#02">
                    <div><img src="img/procedure_2.png"></div>
                </a>
                <p class="content">S'inscrire<br>sur Moveonline</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">03.</p>
                <a href="procedure.html#03">
                    <div><img src="img/procedure_3.png"></div>
                </a>
                <p class="content">Commission<br>d'affectations DRI</p>
            </div>
            <div class="road_arc"></div>
            <div class="road_vide"></div>
            <div class="step">
                <p class="num text_red">04.</p>
                <a href="procedure.html#04">
                    <div><img src="img/procedure_4.png"></div>
                </a>
                <p class="content">Préparation et<br>envoie des dossiers</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">05.</p>
                <a href="procedure.html#05">
                    <div><img src="img/procedure_5.png"></div>
                </a>
                <p class="content">Réponse de<br>l'école d'accueil</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">06.</p>
                <a href="procedure.html#06">
                    <div><img src="img/procedure_6.png"></div>
                </a>
                <p class="content">Ça y est,<br>VOUS PARTEZ !!!</p>
            </div>
            <div class="road_arc"></div>
        </div>
        <button class="procedure_btn" onclick="window.location.href='procedure.html'">Voir la procédure détaillée</button>
    </div>
    <img src="img/homepage_temoignages_bg.jpg" class="temoignages_bg">
    <div class="content temoignages">
        <p class="title">Témoignages d'étudiant</p>
        <div>
            <img src="img/temoignages_icon.png" class="temoignages_icon">
            <div class="temoignages_content">
                <div>
                    <p class="temoignages_content_txt active"></p>
                </div>
                <div>
                    <div class="temoignages_profile active">
                        <img src="img/temoignages_user_1.png" onclick="changeTemoignages(0)">
                        <p class="name">User1</p>
                        <p class="location">Location1</p>
                    </div>
                    <div class="temoignages_profile">
                        <img src="img/temoignages_user_2.png" onclick="changeTemoignages(1)">
                        <p class="name">User2</p>
                        <p class="location">Location2</p>
                    </div>
                    <div class="temoignages_profile">
                        <img src="img/temoignages_user_3.png" onclick="changeTemoignages(2)">
                        <p class="name">User3</p>
                        <p class="location">Location3</p>
                    </div>
                    <div class="temoignages_profile not_phone">
                        <img src="img/temoignages_user_4.png" onclick="changeTemoignages(3)">
                        <p class="name">User4</p>
                        <p class="location">Location4</p>
                    </div>
                    <div class="temoignages_profile not_phone">
                        <img src="img/temoignages_user_5.png" onclick="changeTemoignages(4)">
                        <p class="name">User5</p>
                        <p class="location">Location5</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="separator">
        <div class="separator_line"></div>
        <div class="separator_point"></div>
        <div class="separator_line"></div>
    </div>
    <div class="content links">
        <a href="simu.html">
            <div class="square">
                <img src="img/homepage_simu_budget.jpg" class="square_bg">
                <div>
                    <p class="text_white">Simuler votre budget</p>
                    <img src="img/next_btn.png">
                </div>
            </div>
        </a>
        <a href="FAQ.html">
            <div class="square">
                <img src="img/homepage_faq.jpg" class="square_bg">
                <div>
                    <p class="text_white">Voir la FAQ</p>
                    <img src="img/next_btn.png">
                </div>
            </div>
        </a>
    </div>
    <div class="contact">
        <div class="title">Nous contacter</div>
        <div class="coords">
            <div class="coord left">
                <p class="text_white name">Danièle <span>Fournier</span></p>
                <div>
                    <p class="text_white fonction">Directrice des RI</p>
                    <div class="line"></div>
                </div>
                <p class="text_white mail">fournier@insa-toulouse.fr</p>
            </div>
            <img src="img/mail_icon.png" class="mail_icon">
            <div class="coord right">
                <p class="text_white name">Virginie <span>Gary</span></p>
                <div>
                    <div class="line"></div>
                    <p class="text_white fonction">Etudiants sortants</p>
                </div>
                <p class="text_white mail">gary@insa-toulouse.fr</p>
            </div>
        </div>
    </div>
    <footer>
        <p class="text_white">Thème, design et code réalisés par <span>E</span>mna, <span>H</span>a, <span>J</span>in <span>Y</span>u et <span>S</span>amuel - <a href="#" class="text_white">plan du site</a></p>
    </footer>
</div>
<script type="text/javascript" src="js/request_data.js"></script>
<script type="text/javascript">
    let temoignages;

    request.onload = function () {
        let data = request.response;
        temoignages = data.temoignages;
        document.querySelector('.temoignages_content_txt.active').innerText = temoignages[0];
        createSlides(data.slider.slides, data.schools);
    };

    function menuToggle(x){
        x.parentElement.classList.toggle("active");
        //document.querySelector('body').classList.toggle("active");
    }

    let pagination = document.querySelector('.slider .pagination');
    let slides = document.querySelector('.slider .slides');
    let pos_slide = 0;
    let autoSlide = setInterval(function(){
        changeSlide(-1);
    }, 3000);

    function createSlides(x , y){
        let page_count_1 = "<div class=\"page_count\" onclick=\"changeSlide(";
        let page_count_2 = ")\"></div>";
        let slide_1 = "<div class=\"slide\"><img src=\"";
        let slide_2 = "\"><div class=\"slide_txt\"><p class=\"name text_shadow text_white\">";
        let slide_3 = "</p><div class=\"line\"></div><p class=\"location text_shadow text_white\">";
        let slide_4 = "<br>";
        let slide_5 = "</p></div></div>";
        x.forEach(function (el, i) {
            let school = y[el];
            pagination.innerHTML += page_count_1 + i + page_count_2;
            slides.innerHTML += slide_1 + 'img/data/' + el.toLowerCase().replace(/ /g, '_') + '_bg.jpg' + slide_2 + el + slide_3 + school.city + "," + slide_4 + school.country + slide_5;
        });
        pagination.firstElementChild.classList.add("active");
        slides.firstElementChild.classList.add("active");
    }

    function changeSlide(x){
        if (pos_slide !== x){
            slides.children[pos_slide].classList.remove("active");
            pagination.children[pos_slide].classList.remove("active");
            if (x >= 0){
                slides.children[x].classList.add("active");
                pagination.children[x].classList.add("active");
                pos_slide = x;
            }else{
                let y = pos_slide+x+2;
                if (y >= slides.children.length) y = 0;
                else if (y < 0) y = slides.children.length-1;
                slides.children[y].classList.add("active");
                pagination.children[y].classList.add("active");
                pos_slide = y;
            }
            clearInterval(autoSlide);
            autoSlide = setInterval(function(){
                changeSlide(-1);
            }, 3000);
        }
    }

    function changeTemoignages(x) {
        let i = 0;
        document.querySelector('.temoignages_content').children[1].querySelectorAll('div').forEach(function(el, j){
            if (el.classList.contains("active")) i = j;
        });
        document.querySelector('.temoignages_content').children[1].children[i].classList.remove("active");
        document.querySelector('.temoignages_content').children[1].children[x].classList.add("active");
        shuffleTextEffect(temoignages[x]);
    }

    let specialChars = [
        '!','§','$','%','&','/','(',')','=','?','_','<','>','^','°','*','#','-',':',';','~'
    ];

    let colors = [
        '#f44336','#e91e63','#9c27b0','#673ab7','#3f51b5','#2196f3','#03a9f4','#00bcd4','#009688',
        '#4caf50','#8bc34a','#cddc39','#ffeb3b','#ffc107','#ff9800','#ff5722','#795548','#9e9e9e',
        '#607d8b'
    ];

    function shuffleTextEffect(str){
        let i = 0;
        let p = document.querySelector('.temoignages_content_txt.active');
        let l = str.length;
        let colorsLength = colors.length;
        let specialCharsLength = specialChars.length;
        p.innerHTML = "";
        for (let j = 0; j < l; j++){
            let newSpan = document.createElement('span');
            p.appendChild(newSpan);
        }
        let s = document.querySelectorAll('.temoignages_content_txt.active span');
        let effect = setInterval(function(){
            console.log(i);
            s[i].style.color = 'black';
            s[i].innerHTML = str.substr(i,1);
            for (let j = i+1; j < l; j++){
                s[j].style.color = colors[Math.floor(Math.random()*colorsLength)];
                s[j].innerHTML = specialChars[Math.floor(Math.random()*specialCharsLength)];
            }
            ++i;
            if(i === l){
                p.innerHTML = str;
                clearInterval(effect);
            }
        }, 5);
    }
</script>
</body>
</html>