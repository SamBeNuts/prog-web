<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Emna">
    <meta name="author" content="Ha">
    <meta name="author" content="Jin Yu">
    <meta name="author" content="Samuel">
    <meta name="description" content="Prog Web">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INSA - Prog Web</title>
    <link rel="icon" href="img/favicon-96x96.png" type="image/png" sizes="96x96">
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/homepage.css">
</head>
<body>
<div id="wrapper">
    <header>
        <img src="img/header_bg_homepage.jpg" class="bg">
        <img src="img/student_header_homepage.png" class="student_bg not_phone">
        <p class="text_bg text_white text_shadow_bt">Planning to <br><span class="text_red front">study</span> <span>abroad</span></p>
        <a href="index.html"><img src="img/logo_insa_w.png" class="logo_insa"></a>
        <nav role="navigation">
            <div class="menuToggle" onclick="menuToggle(this)">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <ul class="menuItems">
                <li><a href="offre.html" class="text_white text_shadow">Écoles partenaires</a></li>
                <li><a href="procedure.html" class="text_white text_shadow">Procédure</a></li>
                <li><a href="simu.html" class="text_white text_shadow">Simulation budget</a></li>
                <li><a href="FAQ.html" class="text_white text_shadow">FAQ</a></li>
                <!--<li>FR/EN</li>-->
            </ul>
        </nav>
    </header>
    <div class="content chiffres">
        <div>
            <img src="img/chiffres_1.png">
            <p><span>300</span><br>étudiants/an</p>
        </div>
        <div>
            <img src="img/chiffres_2.png">
            <p><span>200+</span><br>écoles partenaires</p>
        </div>
        <div>
            <img src="img/chiffres_3.png">
            <p><span>40+</span><br>pays visités</p>
        </div>
    </div>
    <div class="content avantages">
        <div class="left not_phone">
            <img src="img/avantages_1.png">
            <p class="avantages_txt_num text_red">2</p>
            <p class="avantages_txt_title">Gagner en autonomie et en capacité d'adaptation !</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            <img src="img/avantages_2.png">
        </div>
        <div class="right">
            <p class="title">Pourquoi partir à l'étranger ?</p>
            <p class="avantages_txt_num text_red">1</p>
            <p class="avantages_txt_title"> Découvrir un nouveau pays, de nouvelles cultures, ...</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            <div class="not_pc not_tablet">
                <p class="avantages_txt_num text_red">2</p>
                <p class="avantages_txt_title">Gagner en autonomie et en capacité d'adaptation !</p>
                <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
            </div>
            <img src="img/avantages_3.png">
            <p class="avantages_txt_num text_red">3</p>
            <p class="avantages_txt_title">Se préparer à une carrière internationale</p>
            <p class="avantages_txt_content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus ante eros, iaculis quis leo ut, mollis cursus nisi. Praesent quis semper massa.</p>
        </div>
    </div>
    <div class="content partner_schools_title">
        <p class="title">Nouvelles écoles partenaires</p>
    </div>
    <div class="slider">
        <div class="slides"></div>
        <img src="img/next_btn.png" class="navigation previous" onclick="changeSlide(-3)">
        <div class="pagination"></div>
        <img src="img/next_btn.png" class="navigation next" onclick="changeSlide(-1)">
        <a href="offre.html">
            <div class="see_more">
                <p class="text_white text_shadow"><img src="img/more_btn.png"> Voir toutes les offres</p>
            </div>
        </a>
    </div>
    <div class="content procedure">
        <p class="title">Procédure</p>
        <div class="road">
            <div class="road_arc"></div>
            <div class="step">
                <p class="num text_red">01.</p>
                <a href="procedure#01">
                    <div><img src="img/procedure_1.png"></div>
                </a>
                <p class="content">Définir<br>son projet</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">02.</p>
                <a href="procedure#02">
                    <div><img src="img/procedure_2.png"></div>
                </a>
                <p class="content">S'inscrire<br>sur Moveonline</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">03.</p>
                <a href="procedure#03">
                    <div><img src="img/procedure_3.png"></div>
                </a>
                <p class="content">Commission<br>d'affectations DRI</p>
            </div>
            <div class="road_arc"></div>
            <div class="road_vide"></div>
            <div class="step">
                <p class="num text_red">04.</p>
                <a href="procedure#04">
                    <div><img src="img/procedure_4.png"></div>
                </a>
                <p class="content">Préparation et<br>envoie des dossiers</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">05.</p>
                <a href="procedure#05">
                    <div><img src="img/procedure_5.png"></div>
                </a>
                <p class="content">Réponse de<br>l'école d'accueil</p>
            </div>
            <div class="road_line"></div>
            <div class="step">
                <p class="num text_red">06.</p>
                <a href="procedure#06">
                    <div><img src="img/procedure_6.png"></div>
                </a>
                <p class="content">Ça y est,<br>VOUS PARTEZ !!!</p>
            </div>
            <div class="road_arc"></div>
        </div>
        <button class="procedure_btn" onclick="window.location.href='procedure'">Voir la procédure détaillée</button>
    </div>
    <img src="img/homepage_temoignages_bg.jpg" class="temoignages_bg">
    <div class="content temoignages">
        <p class="title">Témoignages d'étudiant</p>
        <div>
            <img src="img/temoignages_icon.png" class="temoignages_icon">
            <div class="temoignages_content">
                <div>
                    <p class="temoignages_content_txt active"></p>
                </div>
                <div>
                    <div class="temoignages_profile active">
                        <img src="img/temoignages_user_1.png" onclick="changeTemoignages(0)">
                        <p class="name">User1</p>
                        <p class="location">Location1</p>
                    </div>
                    <div class="temoignages_profile">
                        <img src="img/temoignages_user_2.png" onclick="changeTemoignages(1)">
                        <p class="name">User2</p>
                        <p class="location">Location2</p>
                    </div>
                    <div class="temoignages_profile">
                        <img src="img/temoignages_user_3.png" onclick="changeTemoignages(2)">
                        <p class="name">User3</p>
                        <p class="location">Location3</p>
                    </div>
                    <div class="temoignages_profile not_phone">
                        <img src="img/temoignages_user_4.png" onclick="changeTemoignages(3)">
                        <p class="name">User4</p>
                        <p class="location">Location4</p>
                    </div>
                    <div class="temoignages_profile not_phone">
                        <img src="img/temoignages_user_5.png" onclick="changeTemoignages(4)">
                        <p class="name">User5</p>
                        <p class="location">Location5</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="separator">
        <div class="separator_line"></div>
        <div class="separator_point"></div>
        <div class="separator_line"></div>
    </div>
    <div class="content links">
        <a href="simu.html">
            <div class="square">
                <img src="img/homepage_simu_budget.jpg" class="square_bg">
                <div>
                    <p class="text_white">Simuler votre budget</p>
                    <img src="img/next_btn.png">
                </div>
            </div>
        </a>
        <a href="FAQ.html">
            <div class="square">
                <img src="img/homepage_faq.jpg" class="square_bg">
                <div>
                    <p class="text_white">Voir la FAQ</p>
                    <img src="img/next_btn.png">
                </div>
            </div>
        </a>
    </div>
    <div class="contact">
        <div class="title">Nous contacter</div>
        <div class="coords">
            <div class="coord left">
                <p class="text_white name">Danièle <span>Fournier</span></p>
                <div>
                    <p class="text_white fonction">Directrice des RI</p>
                    <div class="line"></div>
                </div>
                <p class="text_white mail">fournier@insa-toulouse.fr</p>
            </div>
            <img src="img/mail_icon.png" class="mail_icon">
            <div class="coord right">
                <p class="text_white name">Virginie <span>Gary</span></p>
                <div>
                    <div class="line"></div>
                    <p class="text_white fonction">Etudiants sortants</p>
                </div>
                <p class="text_white mail">gary@insa-toulouse.fr</p>
            </div>
        </div>
    </div>
    <footer>
        <p class="text_white">Thème, design et code réalisés par <span>E</span>mna, <span>H</span>a, <span>J</span>in <span>Y</span>u et <span>S</span>amuel - <a href="sitemap.html" class="text_white">plan du site</a></p>
    </footer>
</div>
<script type="text/javascript" src="js/request_data.js"></script>
<script type="text/javascript">
    let temoignages;

    request.onload = function () { //
        let data = request.response; //on stocke toutes les données de data.json
        temoignages = data.temoignages;
        document.querySelector('.temoignages_content_txt.active').innerText = temoignages[0]; //on fait apparaître le premier témoignage
        createSlides(data.slider.slides, data.schools);
    };

    function menuToggle(x){
        x.parentElement.classList.toggle("active");
    }

    let pagination = document.querySelector('.slider .pagination'); //barre de navigation du diaporama
    let slides = document.querySelector('.slider .slides'); //diaporama
    let pos_slide = 0; //diapo active du diaporama
    let autoSlide = setInterval(function(){
        changeSlide(-1);
    }, 3000); //toutes les 3s on change la diapo active

    function createSlides(x , y){ //x: les écoles à faire apparaître dans le diaporama / y: liste de toutes les écoles
        //on divise la div .page_count en différentes string afin de rajouter des pages à la pagination (barre de navigation) dynamiquement
        let page_count_1 = "<div class=\"page_count\" onclick=\"changeSlide(";
        let page_count_2 = ")\"></div>";
        //on divise la div .slide en différentes string afin de rajouter les informations des écoles dynamiquement
        let slide_1 = "<a href=\"";
        let slide_2 = "\"><div class=\"slide\"><img src=\"";
        let slide_3 = "\"><div class=\"slide_txt\"><p class=\"name text_shadow_bt text_white\">";
        let slide_4 = "</p><div class=\"line\"></div><p class=\"location text_shadow text_white\">";
        let slide_5 = "<br>";
        let slide_6 = "</p></div></div></a>";
        x.forEach(function (el, i) { //pour chaque élément du tableau, el: nom de l'école / i: indice de l'élément de x
            let school = y[el]; //on récupère les données de l'école qui correspond à el
            //on rajoute une page à la pagination et les informations des écoles dynamiquement
            pagination.innerHTML += page_count_1 + i + page_count_2;
            slides.innerHTML += slide_1 + 'offre_details.html?school=' + el + slide_2 + 'img/data/' + el.toLowerCase().replace(/ /g, '_') + '_bg.jpg' + slide_3 + el + slide_4 + school.city + "," + slide_5 + school.country + slide_6;
        });
        //on fait apparaître la première diapo du diaporama
        pagination.firstElementChild.classList.add("active");
        slides.firstElementChild.firstElementChild.classList.add("active");
    }

    function changeSlide(x){
        if (pos_slide !== x){ //on vérifie que la diapo n'est pas déjà active
            slides.children[pos_slide].firstElementChild.classList.remove("active"); //on rend inactive l'ancienne diapo active
            pagination.children[pos_slide].classList.remove("active"); //de même pour la pagination
            if (x >= 0){ //si x est supérieur à 0, on rend active la diapo d'indice x
                slides.children[x].firstElementChild.classList.add("active");
                pagination.children[x].classList.add("active");
                pos_slide = x;
            }else{ //sinon on rend active la diapo précédente (si x=-3) ou suivante (si x=-1)
                let y = pos_slide+x+2;
                if (y >= slides.children.length) y = 0; //si on est à la fin de la diapo et qu'on va à la diapo suivante, on retourne au début de la diapo
                else if (y < 0) y = slides.children.length-1; //si on est au début de la diapo et qu'on va à la diapo précédente, on va à la fin de la diapo
                slides.children[y].firstElementChild.classList.add("active");
                pagination.children[y].classList.add("active");
                pos_slide = y;
            }
            clearInterval(autoSlide); //on arrête le défilement de la diapo
            autoSlide = setInterval(function(){
                changeSlide(-1);
            }, 3000); //on redémarre le défilement de la diapo (ce qui revient à restart le défilement de la diapo
        }
    }

    function changeTemoignages(x) {
        let i = 0;
        document.querySelector('.temoignages_content').children[1].querySelectorAll('div').forEach(function(el, j){
            if (el.classList.contains("active")) i = j;
        }); //on cherche le témoignages actif de la page
        document.querySelector('.temoignages_content').children[1].children[i].classList.remove("active"); //on rend inactif ce témoignage
        document.querySelector('.temoignages_content').children[1].children[x].classList.add("active"); //on rend actif le témoignage d'indice x (passé en paramètre)
        document.querySelector('.temoignages_content_txt.active').innerHTML = str;
    }
</script>
</body>
</html>